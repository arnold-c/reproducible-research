\documentclass[]{book}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\hypersetup{unicode=true,
            pdftitle={PHO Data Management Guidelines},
            pdfauthor={Callum Arnold; Steph L Hughes},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{natbib}
\bibliographystyle{apalike}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{5}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

%%% Use protect on footnotes to avoid problems with footnotes in titles
\let\rmarkdownfootnote\footnote%
\def\footnote{\protect\rmarkdownfootnote}

%%% Change title format to be more compact
\usepackage{titling}

% Create subtitle command for use in maketitle
\newcommand{\subtitle}[1]{
  \posttitle{
    \begin{center}\large#1\end{center}
    }
}

\setlength{\droptitle}{-2em}

  \title{PHO Data Management Guidelines}
    \pretitle{\vspace{\droptitle}\centering\huge}
  \posttitle{\par}
    \author{Callum Arnold \\ Steph L Hughes}
    \preauthor{\centering\large\emph}
  \postauthor{\par}
      \predate{\centering\large\emph}
  \postdate{\par}
    \date{2019-02-21}

\usepackage{booktabs}
\usepackage{amsthm}
\makeatletter
\def\thm@space@setup{%
  \thm@preskip=8pt plus 2pt minus 4pt
  \thm@postskip=\thm@preskip
}
\makeatother

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\hypertarget{welcome-and-what-this-book-is-about}{%
\chapter*{Welcome, and what this book is about}\label{welcome-and-what-this-book-is-about}}
\addcontentsline{toc}{chapter}{Welcome, and what this book is about}

This book's focus is on how to produce reproducible research, and should serve as an introduction to data management and project organisation with a particular focus on what can be achieved at Public Health Ontario. Whilst there are many tools that we can use to ensure our projects and code are tidy and result in reproducible work, some of these are not possible to implement given the potential requirements for administrative priviges during set up. As such, we have divided this book into multiple sections, progressively getting more involved as the book continues. Whilst you may be able to utilise these more sophisticated tools, the core of reproducible research remains the same, so the first chapters still apply.

We hope that you enjoy the content and feel like you come away having learnt something useful, and that this book can serve as a reference document for your future research. If you have any questions that cannot be answered within the book, or you would like to contribute and improve this document, please contact us.

\hypertarget{the-basics-for-all}{%
\chapter{The basics for all}\label{the-basics-for-all}}

This chapter focusses on what everyone can and should be doing. The guidelines here do not require anything to be downloaded, so can be implemented immediately and easily. If you follow the principles laid out here, you are well on your way to making reproducible research.

\hypertarget{reproducible-work---an-introduction}{%
\section{Reproducible work - an introduction}\label{reproducible-work---an-introduction}}

Before we can discuss how we should structure our projects and manage our data, we need to first talk about reproducible research.

\hypertarget{what-is-reproducible-work}{%
\subsection{What is reproducible work?}\label{what-is-reproducible-work}}

\begin{itemize}
\tightlist
\item
  Contains relevant code, including which packages were used, and which programming language was used
\item
  Contains enough text, either via markdown or comments, to be able to understand the purpose of the code chunks and code document

  \begin{itemize}
  \tightlist
  \item
    Ideally integrates code and results, along with text, into a single document (\textbf{literate programming!})
  \end{itemize}
\item
  Applying good data quality control techniques to ensure that projects are self-contained so that all files and everything necessary to produce the output documents are easily accessible and accounted for
\end{itemize}

\hypertarget{why-is-it-important}{%
\subsection{Why is it important?}\label{why-is-it-important}}

Simply put, mistakes happen. Projects also move between PHO employees. If your project is structured properly, you will have a code document that contains all of the relevant information, and it is easy to recreate the outcomes. Importantly, you will also have the necessary input files (and tracking of \textbf{all} their changes) stored within the project folder. That way, if you move computers, delete a document by accident, or hand over the project to another person, everything is neatly contained and can be reproduced without hassle.

\hypertarget{how-do-i-make-reproducible-work}{%
\subsection{How do I make reproducible work?}\label{how-do-i-make-reproducible-work}}

There are many different ways to make reproducible work. The information listed here should give you the foundations upon which you can build your own systems. However, the principles are the same and largely revolve around project structures and a version control system, such as Git.

\hypertarget{structuring-a-project}{%
\section{Structuring a project}\label{structuring-a-project}}

The first step in creating reproducible research is creating self-contained projects. Everything that goes in to, and comes out of, the project, should be contained within a single folder (directory). At PHO, it is best that you create these directories within your personal drive (\texttt{H:\textbackslash{}}). I would recommend that you create a folder called \texttt{repos/} that your project folders live in, e.g. \texttt{H:/repos/proj/}. This way, if you like to store other files on your \texttt{H:\textbackslash{}} drive, your project folders are neatly separated. Whilst we will discuss version control with Git \protect\hyperlink{git}{later}, I would suggest that you also routinely back up your project folder to either the shared team drives (\texttt{I:\textbackslash{}} or SharePoint, depending on whether the data is \protect\hyperlink{sensitive-data}{sensitive}).

Now you have set up your \texttt{repos/} folder in your \texttt{H:\textbackslash{}} drive, it is time to create the project folder. This is the structure that I find works for me. You may want to find a variation on it that works for you, but the basic premise of keeping repositories self-contained should remain.

\begin{verbatim}
H:/
└── repos/
    └── proj/
        ├── data/
        ├── docs/
        ├── figs/
        ├── funs/
        ├── out/
        ├── cleaning.R
        └── analysis.R
\end{verbatim}

As you can see, the project repository contains separate directories that you can use to store different file types. Importantly, the analysis and cleaning files are stored in the project root, allowing easy use of relative paths over explicit paths e.g. \texttt{read\_csv(here(\textquotesingle{}data\textquotesingle{},\ \textquotesingle{}data\_file.csv\textquotesingle{}))} rather than \texttt{read\_csv(\textquotesingle{}C:/Users/owner/Documents/Repos/my\_project/data/data\_file.csv\textquotesingle{})}. The reason why relative paths are preferable is that they allow projects to be used by multiple people without the need to re-write code. If you use explicit paths and change computer, or the project is opened by another person, the code will break as they will not have the same directory structure as the computer that the code was created on.

\begin{quote}
\textbf{Note:} the example above used an R package called \texttt{here\_here}, calling the function \texttt{here()}. Similar solutions may exist for other languages, and you should try and find them for the language of your choice.
\end{quote}

\hypertarget{data}{%
\subsection{\texorpdfstring{\texttt{data/}}{data/}}\label{data}}

An important idea is that you should \textbf{treat your data as read-only}. You and your team have likely worked hard to collect the data and it's easy to make a changes along the way that you either forget about, or need to reverse. As most projects span a long time between the data collection and analysis stages, if that happens to you it will take a lot of work to figure out exactly which changes you are interested in reversing etc. To save yourself this hassle, and help make your work reproducible, \textbf{once the data is collected it should not be edited}; all the work should happen in your code, allowing it to be easily checked.

If you are following good data practices and treating your data as read-only, all your cleaning will happen within your code (create a cleaning file in your project e.g. \texttt{proj-cleaning.R}). However, if you do need to edit the files manually (\textbf{and I strongly recommend against it} as it makes it harder to reproduce as there isn't a good way to track exactly what changes were made), you should create a save a new (separate) copy of the dataset (using file \protect\hyperlink{how-to-name-files}{naming conventions}) in your project directory (e.g. \texttt{H:/repos/proj/2019-01-24\_data-file.csv}). Additionally, you should create a word document where you can list the changes you made with each new file. When we get to the section on \protect\hyperlink{git}{Git}, you will see how we can set it up to track all the changes within a project folder (including the create/deletion/movement of files!) so we don't have to remember what changes we make. This means we can just have one copy of each document, and track the changes through time.

\hypertarget{other-subdirectories}{%
\subsection{Other subdirectories}\label{other-subdirectories}}

\begin{itemize}
\tightlist
\item
  \texttt{docs/}: this contains the output documents. For example, if you are using R Markdown to create a pdf via LaTeX, you could place them here.
\item
  \texttt{funs/}: this contains the functions you write and might want to reference. The idea is to create functions so that can give code a meaningful name. It also helps if you need to repeat a code chunk multiple times, especially if you need to edit it at some point, as you can just call the function rather than typing it out each time.
\item
  \texttt{out/}: this contains files that are produced from the original data e.g.~cleaned data files. You can then call them in your analysis scripts.
\item
  \texttt{figs/}: this contains figures that may be generated from your scripts.
\end{itemize}

Importantly, if you follow the principle that your \texttt{data/} files are read-only, all of the files in these directories (with the exception of \texttt{funs/}) \emph{should} be reproducible and could be deleted at any time without concern of generating them again. In order to revert to previous figures and output versions, you will need to be able to track changes in your code. This is where a \emph{version control system} like Git comes in, which we will discuss in the next section.

\hypertarget{how-to-name-files}{%
\subsection{How to name files}\label{how-to-name-files}}

How you name files and directories may not seem like an important point, but it can cause quite a headache if you try and use code to automate processes, and at best, it just slows things down. To quote Aaron Quinlan, a bioinformatician, \href{https://twitter.com/aaronquinlan/status/711593127551733761}{``a space in a filename is a space in one's soul''}.

Instead try and use something like \href{https://speakerdeck.com/jennybc/how-to-name-files}{this}:

\begin{itemize}
\tightlist
\item
  KISS (\emph{Keep It Simple Stupid}): use simple and consistent file names

  \begin{itemize}
  \tightlist
  \item
    It needs to be machine readable
  \item
    It needs to be human readable
  \item
    It needs to order well in a directory
  \end{itemize}
\item
  No special characters and \textbf{no spaces}!
\item
  Use YYYY-MM-DD date format
\item
  Use \texttt{-} to delimit words and \texttt{\_} to delimit sections

  \begin{itemize}
  \tightlist
  \item
    i.e. \texttt{2019-01-19\_my-data.csv}
  \end{itemize}
\item
  Left-pad numbers

  \begin{itemize}
  \tightlist
  \item
    i.e. \texttt{01\_my-data.csv} vs \texttt{1\_my-data.csv}
  \item
    If you don't, file orders get messed up when you get to double-digits
  \end{itemize}
\end{itemize}

\hypertarget{what-is-sensitive-data}{%
\subsection{What is sensitive data?}\label{what-is-sensitive-data}}

Some of the data you will be working with is sensitive. As such, we need to know the most appropriate places to store it, along with how it can be shared.

Sensitive data refer to:

\begin{itemize}
\tightlist
\item
  Data which contain identifiable information
\item
  Personal data (e.g.~name, health card number, post code, etc.)
\end{itemize}

These data contain information which can identify individual persons. Therefore, they must be carefully protected and only shared with those who have special permission. They are also not the norm and are typically used only when absolutely necessary.

Non-sensitive data refer to:

\begin{itemize}
\tightlist
\item
  Data which have been de-identified (e.g.~unique identifier)
\item
  Aggregated data (e.g.~post code region)
\end{itemize}

Because these data are designed not to be traceable to the individual level, less care and protection is required. However, safeguards are still often used for reassurance.

As alluded to earlier, if you have sensitive data, you should not store your backups on the \texttt{I:\textbackslash{}} drive/SharePoint *\emph{delete as appropriate}*, instead opting to use the \texttt{I:\textbackslash{}} drive/SharePoint *\emph{delete as appropriate}*.

\hypertarget{project-structure-summary}{%
\subsection{Project structure summary}\label{project-structure-summary}}

If you've followed the steps up until here, you will have a project folder in your \texttt{H:\textbackslash{}} drive and the shared team drives, complete with all data and output files, and images and tables etc. generated. Most importantly, your project folder will contain a final copy of your code so your results could be replicated if necessary. Ideally, this code will contain your final results in one easy-to-distribute package. This can be done in either a Microsoft Excel or Word file with all code typed and results copy and pasted, or by using a \protect\hyperlink{jupyter-notebooks}{Jupyter notebook} as we advocate for here.

\hypertarget{key-points}{%
\subsection{Key Points}\label{key-points}}

\begin{itemize}
\tightlist
\item
  Use a version control system such as Git to track changes in your code.
\item
  Data isn't touched one collected:

  \begin{itemize}
  \tightlist
  \item
    Do all \emph{data munging} within your program i.e.~no editing the excel spreadsheets!!!
  \item
    You should have an untouched copy of your data on your \texttt{H:\textbackslash{}} drive \textbf{and} the shared team drives
  \end{itemize}
\item
  Your outputs should be reproducible from the code you have:

  \begin{itemize}
  \tightlist
  \item
    Make sure this is the case by routinely clearing your programming environment and re-running the code in a clean environment to ensure your results aren't contingent on \emph{`hidden'} packages/modules that were \href{https://onunicornsandgenes.blog/2017/04/02/using-r-dont-save-your-workspace/}{loaded erroneously}
  \end{itemize}
\item
  Never set explicit file paths (e.g. \texttt{setwd()}) if you can avoid it

  \begin{itemize}
  \tightlist
  \item
    Try and use a package that allows you to set relative paths e.g. \texttt{here\_here} in R. This allows the project to be passed to someone else in its entirety and the code won't break because they don't have the same folder names and set up as you (also if you work on multiple computers/OS)
  \end{itemize}
\item
  Format your filenames properly
\end{itemize}

\hypertarget{if-you-cannot-download-anything}{%
\chapter{If you cannot download anything}\label{if-you-cannot-download-anything}}

As the title says, this section is aimed at those who are not able to download any software to help in their quest for reproducible research. If you can download software, you should try and use the techniques laid out in the next few chapters.

\hypertarget{word-documents}{%
\section{Word Documents}\label{word-documents}}

Details about copy-pasting \ldots{} blah blah \ldots{}

\hypertarget{if-you-can-download-python}{%
\chapter{If you can download Python}\label{if-you-can-download-python}}

This chapter is aimed at those who are able to download the programming language Python. This should hopefully be everyone, as it does not currently require administrative pivileges, but we cannot guarantee this will be the case in the future.

\hypertarget{notebooks}{%
\section{Notebooks}\label{notebooks}}

There are many different types of notebooks, but we will only explore Jupyter notebooks. The reason why we won't look at other options is because Jupyter notebooks are very well established and have numerous kernels available that allow for the use of many different statistical and programming languages. \textbf{Note:} if you are using R, you should be using RStudio in combination with R Notebooks or Rmd files (or using \texttt{\#\textquotesingle{}} in your \texttt{.R} scripts to insert markdown comments), which are far more suited to R than Jupyter is.

But first, what is a notebook, and why should we use them?

A notebook is a way of producing documents that mix plain text and code, which was one of the key goals at the beginning of this guide! Whilst \href{https://docs.google.com/presentation/d/1n2RlMdmv1p25Xy5thJUhkKGvjtV-dkAIsUXP-AL4ffI/edit\#slide=id.g3a428e2eb8_0_305}{they are not perfect} (though read \href{https://yihui.name/en/2018/09/notebook-war/}{this} to see some rebuttals), and should not be used for doing heavy coding and scripting, they are excellent for data exploration and producing output documents. You just need to be careful to run all the code in a fresh environment often enough to ensure you don't have any \emph{hidden} packages/modules loaded in the background that aren't part of your code.

\hypertarget{setting-up-jupyter-notebooks}{%
\section{Setting up Jupyter notebooks}\label{setting-up-jupyter-notebooks}}

This section will give you a brief overview of what a Jupyter notebook is and how to use them, but if you would like a more detailed understanding, please read the official \href{https://jupyter-notebook.readthedocs.io/en/stable/notebook.html}{documentation}. Jupyter Labs has now been released as a newer version of notebooks, giving you a full IDE (integrated development environment) and more control over the notebooks and working environment. This guide will not explore these features, as we are more interested in how to use the notebook.

\begin{quote}
\textbf{Note:} throughout this section you can substitute the phrase \emph{``Jupyter notebooks''} with \emph{``Jupyter Labs''} if you would prefer to have a full IDE allowing you more control over the system.
\end{quote}

Jupyter notebooks are run on Python, though additional things can be downloaded to allow you to use your programming language of choice. For an example of what you can do with Jupyter notebooks, click \href{https://nbviewer.jupyter.org/github/CamDavidsonPilon/Probabilistic-Programming-and-Bayesian-Methods-for-Hackers/blob/master/Chapter1_Introduction/Ch1_Introduction_PyMC3.ipynb}{here}, and \href{https://Github.com/jupyter/jupyter/wiki/A-gallery-of-interesting-Jupyter-Notebooks\#programming-and-computer-science}{here} for a collection of neat and applied notebooks.

\hypertarget{installing-jupyter-notebooks}{%
\subsection{Installing Jupyter notebooks}\label{installing-jupyter-notebooks}}

Mac's come shipped with a version of Python, but it is most likely outdated, and it doesn't contain everything we want. In order to get running, I strongly recommend downloading the Anaconda distribution over other distributions, or even just directly from Python's website. The instructions below will be enough to get you up and running with Jupyter notebooks in your language of choice.

\begin{itemize}
\tightlist
\item
  Download the full \href{https://www.anaconda.com/download/}{Anaconda} distribution i.e.~not miniconda

  \begin{itemize}
  \tightlist
  \item
    Be sure to choose \texttt{Python\ 3.x}, not \texttt{Python\ 2.x}, as it's the newer version and is forwards-compatible.
  \item
    Be sure to only install for one user, not the whole system
  \item
    Be sure to select \texttt{Add\ Anaconda\ to\ my\ PATH\ environment\ variable} under Advanced Options
  \item
    Be sure to install Anaconda to the \texttt{H:\textbackslash{}} drive on your computer, as this is where your data lives. To do this you will need to manually edit the installation path within the Anaconda installer wizard, otherwise it will end up in the \texttt{C:\textbackslash{}} drive

    \begin{itemize}
    \tightlist
    \item
      This is OK if you are able to store data on this drive, and therefore can create your repositories within the \texttt{C:\textbackslash{}} drive.
    \item
      Worst case scenario you can use the command \texttt{cd\ "H:/..."} at the top of the notebook to specify the relevant path to your data, but this is bad practice for the reasons mentioned \protect\hyperlink{structuring-a-project}{above}.
    \end{itemize}
  \end{itemize}
\item
  Use \texttt{kernels} to connect your programming language of choice with python and the notebook

  \begin{itemize}
  \tightlist
  \item
    To see how to get a particular language to work in Jupyter Notebooks, please click on the appropriate language:

    \begin{itemize}
    \tightlist
    \item
      \protect\hyperlink{installing-the-stata-kernel}{Stata}
    \item
      \protect\hyperlink{installing-the-sas-kernel}{SAS}
    \item
      \protect\hyperlink{connecting-r-with-jupyter}{R}
    \end{itemize}
  \end{itemize}
\end{itemize}

\hypertarget{kernels}{%
\subsection{Kernels}\label{kernels}}

A kernel is program that allows the notebook to connect with, and run, your code. Jupyter comes with the Python code pre-installed, but if you want to use a different language, you will need to download a specific kernel.

Below, the installation instructions are described for common languages used in epidemiology. To see a full list of kernels available for Jupyter, along with the appropriate documentation and installation instructions, follow \href{https://Github.com/jupyter/jupyter/wiki/Jupyter-kernels}{this link}.

\hypertarget{installing-the-stata-kernel}{%
\subsubsection{Installing the Stata kernel}\label{installing-the-stata-kernel}}

The instructions for installing the \texttt{stata\_kernel} are based from the original documentation \href{https://kylebarron.Github.io/stata_kernel/getting_started/}{here}. It should work with \texttt{Stata\ 12} (we have tested it). If these instructions do not work for you, it may be that there has been an update to the kernel, at which point, please refer to the original documentation linked above.

Open a command prompt (Windows) / terminal (linux/mac) and type/copy-paste the following commands, pressing enter after each line

\begin{itemize}
\tightlist
\item
  \texttt{pip\ install\ stata\_kernel}
\item
  \texttt{python\ -m\ stata\_kernel.install}
\end{itemize}

\textbf{Windows-specific steps}

In order to let \texttt{stata\_kernel} talk to Stata, you need to link the Stata Automation library:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  In the installation directory (most likely \texttt{C:\textbackslash{}Program\ Files\ (x86)\textbackslash{}Stata12} or similar), right-click on the Stata executable, for example, \texttt{StataSE.exe} (this will just show as \texttt{StataSE}, but is listed as an application). Choose \texttt{Create\ Shortcut}. Placing it on the Desktop is fine.
\item
  Right-click on the newly created \texttt{Shortcut\ to\ StataSE.exe}, choose \texttt{Properties}, and append\texttt{/Register} to the end of the Target field. So if the target is currently \texttt{"C:\textbackslash{}Program\ Files\textbackslash{}Stata12\textbackslash{}StataSE.exe"}, change it to \texttt{"C:\textbackslash{}Program\ Files\textbackslash{}Stata12\textbackslash{}StataSE.exe"\ /Register} (note the space before \texttt{/}). Click OK.
\item
  Right-click on the updated \texttt{Shortcut\ to\ StataSE.exe}; choose Run as administrator.
\item
  Enter your CIHS details
\end{enumerate}

\hypertarget{installing-the-sas-kernel}{%
\subsection{Installing the SAS kernel}\label{installing-the-sas-kernel}}

*\emph{This has not yet been tested here at PHO. The instructions for installing the \texttt{sas\_kernel} are based from the original documentation \href{https://Github.com/sassoftware/sas_kernel}{here}}*

Open a command prompt (Windows) / terminal (linux/mac) and type/copy-paste the following commands, pressing enter after each line. First we need to install a dependency called \texttt{saspy} that helps the kernel connect \texttt{SAS} to \texttt{python}

\begin{itemize}
\tightlist
\item
  \texttt{pip\ install\ saspy}
\item
  \texttt{pip\ install\ sas\_kernel}
\end{itemize}

You should now see something like this.

\begin{verbatim}
Available kernels:
python3    /home/sas/anaconda3/lib/python3.5/site-packages/ipykernel/resources
sas        /home/sas/.local/share/jupyter/kernels/sas
\end{verbatim}

Now verify that the SAS Executable is correct

\begin{itemize}
\tightlist
\item
  find the \texttt{sascfg.py} file -- it is currently located in the install location (see above) \texttt{{[}install\ location{]}/site-packages/saspy/sascfg.py}. To query \texttt{pip} for the location of the file, type \texttt{pip\ show\ saspy}. Failing that, this command will search the OS for the file location: \texttt{find\ /\ -name\ sascfg.py}
\item
  edit the file with the correct path the SAS executable and include any options you wish it include in the SAS invocation. See examples in this \href{https://Github.com/sassoftware/saspy/blob/master/saspy/sascfg.py}{file}
\end{itemize}

\hypertarget{connecting-r-with-jupyter}{%
\subsubsection{Connecting R with Jupyter}\label{connecting-r-with-jupyter}}

If you are hoping to make nice documents and reproducible work using R, I would highly recommend that you use the R Markdown or R Notebook through \href{https://www.rstudio.com/products/rstudio/download/}{RStudio} application instead. However, if you would prefer Jupyter, then please read on.

It is possible to download an R kernel, much like for Stata and SAS, but it can be a bit fickle, so a different approach is described below. It is important to note that with this method you are installing a fresh version of R, so you will not have access to the packages you have previously installed - you will need to reinstall them in this R environment, which could be done within a Jupyter notebook.

Open a command prompt (Windows) / terminal (Linux/Mac) and enter the following commands:

\begin{itemize}
\tightlist
\item
  \texttt{conda\ install\ r-essentials\ r-igraph}
\item
  \texttt{Rscript\ -e\ \textquotesingle{}install.packages("languageserver")\textquotesingle{}}
\end{itemize}

If you would rather install an R kernel than a fresh install of R within the Anaconda distribution, you can follow the instructions \href{https://richpauloo.Github.io/2018-05-16-Installing-the-R-kernel-in-Jupyter-Lab/}{here}. The advantage of this is that it allows the notebook to access previously installed packages as they are not running off a fresh version of R.

\hypertarget{using-jupyter-notebooks}{%
\section{Using Jupyter notebooks}\label{using-jupyter-notebooks}}

Now you have set up Jupyter to run with the programming language of your choice, we should start using it. How you do that is detailed in this section.

\hypertarget{creating-a-notebook}{%
\subsection{Creating a notebook}\label{creating-a-notebook}}

You can either open up the Anaconda navigator and then Jupyter notebooks, or open Jupyter notebooks directly. Once open, navigate to the directory you would like to create the notebook in (\emph{If you are using a version control system like Git, then you should be within the project's repository})

Select the \textbf{New} button in the top right corner, and then select the language you would like to program in (\emph{this assumes that you have downloaded an appropriate kernel if you would like to use a language other than Python})

\hypertarget{running-a-jupyter-notebook}{%
\subsection{Running a Jupyter notebook}\label{running-a-jupyter-notebook}}

*\emph{Update this section}*

Now you have the notebook open in your chosen language, it's time to start doing some data exploration and analysis. Here, we'll cover some basic commands that will get you started, but to fully leverage the power of the notebook, you should read the \href{https://jupyter-notebook.readthedocs.io/en/stable/notebook.html\#code-cells}{Jupyter documentation}, along with the documentation of your preferred kernel, particularly sections relating to \texttt{magic} commands (which are language-specific).

\begin{itemize}
\tightlist
\item
  \texttt{Shift\ +\ Enter}
\item
  \texttt{Command\ +\ Enter}
\item
  \texttt{Esc}

  \begin{itemize}
  \tightlist
  \item
    \texttt{Ctrl/Cmd\ +\ a}
  \item
    \texttt{Ctrl/Cmd\ +\ b}
  \item
    \texttt{dd}
  \item
    \texttt{Ctrl/Cmd\ +\ m}
  \item
    \texttt{Ctrl/Cmd\ +\ y}
  \end{itemize}
\item
  \texttt{Enter}

  \begin{itemize}
  \tightlist
  \item
    \texttt{Tab}
  \end{itemize}
\end{itemize}

\hypertarget{customizing-jupyter-notebooks-ui}{%
\subsection{Customizing Jupyter notebook's UI}\label{customizing-jupyter-notebooks-ui}}

\textbf{The following section is not essential and can be ignored if you want to keep things as simple as possible.}

Because I do not like the \texttt{In{[}{]}} \texttt{Out{[}{]}} text showing in documents, along with centering plots/figures, I have customized the Jupyter notebook settings. If you would like to do the same, this section should help you. It is not necessary, but I feel that it gives cleaner documents (including pdf documents via LaTeX). If you do this, it is essential that you \textbf{routinely restart the kernel to run everything again in a fresh environment} as it is incredibly easy to run code blocks out of order and forget how this changes the output and introduces \emph{hidden} packages.

If you would like to customize the look of the notebook, \href{https://Github.com/dunovank/jupyter-themes}{jupyterthemes} is a great package that can be installed. I have also edited the \texttt{custom.css} file (\texttt{C:\textbackslash{}Users\textbackslash{}owner\textbackslash{}.jupyter\textbackslash{}custom\textbackslash{}}), adding \texttt{display:\ None;} under the section

\begin{verbatim}
div.prompt,
 .prompt {
\end{verbatim}

so that it now reads

\begin{verbatim}
div.prompt,
 .prompt {
 font-family: monospace, monospace;
 font-size: 9pt !important;
 font-weight: normal;
 display: None;
 .
 .
 .
}
\end{verbatim}

This removes the \texttt{In{[}{]}} \texttt{Out{[}{]}} text. To centre the output of tables/figures, add

\begin{verbatim}
.output_png {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}
\end{verbatim}

to the \texttt{custom.css} file, right after the \texttt{.prompt\ \{..\}} section.

To enable soft wrapping in the notebook, you need to edit the \texttt{notebook.json} file (\texttt{C:\textbackslash{}Users\textbackslash{}callum\ arnold\textbackslash{}.jupyter\textbackslash{}nbconfig\textbackslash{}}). If it does not exist, you need to create it. Once open, add

\begin{verbatim}
{
  "MarkdownCell": {
    "cm_config": {
      "lineWrapping": true
    }
  },
  "CodeCell": {
    "cm_config": {
      "lineWrapping": true
    }
  }
}
\end{verbatim}

before restarting Jupyter.

\hypertarget{output-documents}{%
\section{Output documents}\label{output-documents}}

We've covered a lot of information up until now about setting up your projects and your code, but a big part of reproducible research is the creation of nice-looking documents. The reason we've gone to such effort to install Jupyter notebooks and connect them with our language of choice is that not only do they allow for excellent data exploration, but they also make documents that look professional.

In scientific articles, whilst it's not essential, LaTeX is a nice touch, and Jupyter can give you a LaTeX formatted pdf documents. To do this, you will first need to install LaTeX. If you are on Windows, I would recommend the \href{https://miktex.org/download}{MiKTeX} distribution, and if you use a Mac, then I would recommend the \href{http://www.tug.org/mactex/mactex-download.html}{MacTeX} distribution. You will also need the ``swiss-army knife'' of file conversion, \href{https://pandoc.org/installing.html}{pandoc}. Pandoc is not \emph{needed} for creating LaTeX-formatted pdfs, but if you have documents with unsupported characters and you need to use a different \texttt{pdf-engine} you'll need to use pandoc.

During the installation process, LaTeX should have been added automatically to the PATH. To test this, enter \texttt{pdflatex} into a command line/terminal. If you get the output \texttt{This\ is\ pdfTeX\ ...} then you are good to go. If not, please add the executable to the PATH as listed \protect\hyperlink{env-variables}{above}. The executable location can be found by opening the MiKTeX/MacTeX console and looking at the bin directory under settings. For me, on a Windows computer where I don't have administrator privileges it reads \texttt{C:\textbackslash{}Users\textbackslash{}owner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Programs\textbackslash{}MiKTeX\ 2.9\textbackslash{}miktex/bin/x64}. If you are still having issues, please consult \href{http://sachaepskamp.com/wp-content/uploads/2011/10/Install.pdf}{this document}.

Now you're ready to create a LaTeX-formatted pdf document. All you need to do is click \emph{File -\textgreater{} Download as -\textgreater{} PDF via LaTeX (.pdf)}.

Unfortunately, when creating pdf documents, code is not hard wrapped. This means that if you have a very long line of code (\textgreater{} 80 characters), it will run out of the formatted area, and at worst, off the page. At present, I do not know a way to force Jupyter notebooks to wrap the output automatically, so instead you have to write clean code and start new lines using \texttt{,} and \texttt{\textbackslash{}n} if it's too long.

If you would rather not produce a pdf via LaTeX, instead wanting an arguably more readable output, you could create an html file. This is done in the same manner as pdf documents.

\hypertarget{getting-really-into-it-with-git}{%
\chapter{Getting really into it with Git}\label{getting-really-into-it-with-git}}

This chapter looks at Git; a more advanced technique to creating reproducible research. Think of Git as tracked changes for your code. When working on a project, even if you're the only one coding, it's important to be able to go back to previous versions if you make a mistake and can't remember all the steps you went through since your last stable version. It is particularly important if you plan on working in teams where multiple people are writing code \ldots{} and in small teams where you want to track changes in codes and files, especially if you think your project will ever expand or move between teams \ldots{} or if you think you want to revert back to an original version.

I think you get the picture. If you want to make reproducible work, try using Git.

\hypertarget{set-up}{%
\section{Set up}\label{set-up}}

There are many ways to get Git running on your computer. Depending on your OS and the version you have, Git may come pre-installed on your computer. However, it is a good idea to update it to the latest version, so I'd recommend you follow the steps below anyway.

\hypertarget{windows}{%
\subsection{Windows}\label{windows}}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Install \href{https://Gitforwindows.org/}{Git for Windows}

  \begin{itemize}
  \tightlist
  \item
    This gives you Git Bash, which is a much nicer way of interfacing with Git than the command line.
  \item
    \textbf{Note:} when asked about ``\emph{Adjusting your PATH environment}'', be sure to select ``\emph{Git from the command line and also from 3rd-party software}''. The other default options should be fine. For more details about the installation settings, please click \href{https://Github.com/jennybc/happy-Git-with-r/issues/105}{here}
  \end{itemize}
\item
  Open up Git Bash and enter \texttt{where\ git}. Open up the command line and enter \texttt{where\ git}. Depending on whether you have administrator privileges, the outputs should look something like this, respectively

  \begin{enumerate}
  \def\labelenumii{\arabic{enumii}.}
  \tightlist
  \item
    \texttt{which\ git} : \texttt{/mingw64/bin/git}
  \item
    \texttt{where\ git} : \texttt{C:\textbackslash{}Users\textbackslash{}owner\textbackslash{}AppData\textbackslash{}Local\textbackslash{}Programs\textbackslash{}git\textbackslash{}bin\textbackslash{}git.exe} (User privileges)

    \begin{enumerate}
    \def\labelenumiii{\arabic{enumiii}.}
    \tightlist
    \item
      \texttt{where\ git} : \texttt{C:\textbackslash{}Program\ Files\textbackslash{}git\textbackslash{}bin\textbackslash{}git.exe} (administrator privileges)
    \end{enumerate}
  \end{enumerate}

  \begin{itemize}
  \tightlist
  \item
    If you see \texttt{cmd} instead of \texttt{bin}, then you need to edit the PATH in your environment variables . You can do this by typing \texttt{environment\ variables} into the Start box and scrolling to the PATH section of User/System variables (depending on whether you have administrator privileges), and changing \texttt{cmd} to \texttt{bin} in the \texttt{git.exe} path.
  \end{itemize}
\end{enumerate}

\hypertarget{mac}{%
\subsection{Mac}\label{mac}}

There are more (workable) ways to install Git on OSX than on Windows, but I think this is the best option as it gives you a great package manager for the future.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Open the terminal and enter \texttt{/usr/bin/ruby\ -e\ "\$(curl\ -fsSL\ https:/raw.Githubusercontent.com/Homebrew/install/master/install)"}
\item
  Enter \texttt{brew\ install\ git} into the terminal
\end{enumerate}

\hypertarget{final-git-set-up-steps}{%
\subsection{Final Git set up steps}\label{final-git-set-up-steps}}

Now that you have Git running, you need to tell it who you are. This allows multiple people to make changes to code, and the correct names will be attached to the changes.

Open up the Git Bash and enter

\begin{verbatim}
git config --global user.name 'Firstname Lastname'
git config --global user.email 'my_email@gmail.com'
\end{verbatim}

Typing in \texttt{git\ config\ -\/-global\ -\/-list} is a way to check that your details have been saved correctly.

\textbf{Note:} it is essential that you enter the same \textbf{email} as your GitHub account information. This way you can connect the two. If you would prefer to use a different user name than your GitHub user name you can. This would help show you which computer you completed the work on, but it is not important to most people.

\hypertarget{installation-problems}{%
\subsection{Installation problems}\label{installation-problems}}

If you followed the instructions above, Git should be ready to go. However, sometimes you still end up with errors. This is far more likely with Windows that Mac, but if you find that the next steps don't work for you, see if the other installation options \href{https://happyGitwithr.com/install-Git.html}{here} work for you, or the trouble shooting tips \href{https://happyGitwithr.com/troubleshooting.html}{here} (and \href{https://Github.com/jennybc/happy-Git-with-r/issues/67}{here} if you're on Windows), which are useful when trying to connect Git with RStudio

\hypertarget{git-client}{%
\section{Git client}\label{git-client}}

Now you have Git installed, there are a number of ways to use it. The easiest way is to use a client, which allows you to use buttons instead of typing code. They also provide a visual for more complicated ideas, such as branching, greatly simplifying the process. I prefer to use the \href{https://www.sourcetreeapp.com/}{SourceTree} client, but you can use others. \href{https://www.gitkraken.com/}{GitKraken} is a good alternative, and nicely, it also works on Linux, which many clients don't. I have had some issues connecting SourceTree with GitHub, so have moved towards GitKraken for some projects, and have no qualms with it so far.

\hypertarget{remote-repositories}{%
\section{Remote repositories}\label{remote-repositories}}

It is not essential, but one of the best things about Git is that online repositories create an easier way to sync your work between computers and colleagues, avoiding much of the mess caused when this work happens simultaneously/(insert file sharing system of choice) isn't syncing properly. In this section, I will explain the correct way to utilize this, and the other way \ldots{}

\hypertarget{github---the-good}{%
\subsection{GitHub - the Good}\label{github---the-good}}

*\emph{This section will need to be updated after figuring out the PHO system}*

GitHub is built for this. You should take full advantage of the effort and troubleshooting that has gone into the platform. \textbf{Don't try and recreate the wheel}

With GitHub now offering \href{https://Github.com/pricing}{unlimited free private repositories}, I would recommend that you set up an account with GitHub. The reason why I suggest GitHub over a different purpose-built platform (such as Bitbucket or GitLab) is the community. Previously, I would have recommended Bitbucket due to the unlimited free private repositories, but this is no longer a restriction with GitHub. With GitHub, if you ever want to make your code open-source, you immediately have access to the largest community of programmers who can help you improve your code, as well as putting it to good use. And isn't that why we do research?

Now that you've decided to use GitHub, it's very easy to register. Just click the link above and select the package you'd like. If you have an academic email address, consider making this your primary email address on the account, as it gives you a \textbf{PRO} account unlimited collaborators on private repositories, unlike the standard account that limits it to 3 collaborators.

Be sure to choose a user name that is easy to remember, and easy to find. I would suggest just using your name.

Now you have a GitHub account set up, this is your \emph{remote}. If you work on a project with collaborators, this can be shared with them. That way, collaborators can work on their own versions of the code on their \emph{local} machine (computer), and when it's ready for other people to use/help write, they can \texttt{push} it to the \emph{remote} where others can access it. Don't worry if you don't know what \texttt{push} is - we'll cover that \protect\hyperlink{basic-commands}{soon}

\hypertarget{private-server}{%
\subsection{Private server}\label{private-server}}

It is possible to use and get the benefits of Git without a purpose-made online repository such as GitHub, but it's not as simple and it's not as stable. Because services like Dropbox and OneDrive are not built for storing and tracking changes in code and \emph{dot} files, it can go wrong, especially when more than one author is involved. Of all the file syncing systems, Dropbox seems to be the best option due to the \href{https://github.com/anishathalye/git-remote-dropbox}{git-remote-dropbox extension}, but this is still inferior to GitHub etc. With these home-made systems, corruption of the project repository is a matter of ``when'', not ``if''. If you insist on using this option, go read the \protect\hyperlink{basic-commands}{git basic commands} first, come back, and read on \ldots{}

\hypertarget{dropbox---the-bad}{%
\subsection{Dropbox - the Bad}\label{dropbox---the-bad}}

\hypertarget{git-remote-dropbox}{%
\subsubsection{git-remote-dropbox}\label{git-remote-dropbox}}

Install the git-remote-dropbox extension. The instructions were copied from the \href{https://github.com/anishathalye/git-remote-dropbox}{documentation} and *\emph{have not been tested}*.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Install the helper with \texttt{pip\ install\ git-remote-dropbox}.
\item
  Generate an OAuth 2 token by going to the app console, creating a Dropbox API app with ``Full Dropbox'' access (or ``App folder'' access if you prefer, if you're not going to be using Dropbox's sharing features to use git-remote-dropbox in a multi-user setup), and generating an access token for yourself.
\item
  Save your OAuth token in \texttt{\textasciitilde{}/.config/git/git-remote-dropbox.json} or \texttt{\textasciitilde{}/.git-remote-dropbox.json}. The file should look something like this:
\end{enumerate}

\begin{verbatim}
{
    "default": "xxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxx"
}
\end{verbatim}

\begin{itemize}
\tightlist
\item
  git-remote-dropbox supports using multiple Dropbox accounts. You can create OAuth tokens for different accounts and add them all to the config file, using a user-defined username as the key:
\end{itemize}

\begin{verbatim}
{
    "alice": "xxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxx",
    "ben": "xxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxx",
    "charlie": "xxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxx"
}
\end{verbatim}

\begin{itemize}
\item
  You can tell git-remote-dropbox to use the token corresponding to username by specifying a URL like \texttt{dropbox://username@/path/to/repo}.
\item
  You can also specify the token inline by using a URL like \texttt{dropbox://:token@/path/to/repo}.
\end{itemize}

\hypertarget{creating-a-dropbox-repository}{%
\subsubsection{Creating a Dropbox repository}\label{creating-a-dropbox-repository}}

Now you've installed the helper extension, you can start using Dropbox for your \emph{remote} repositories. Unless a project already exists with a Dropbox repository (i.e.~you've been added to the project and were not the one to set it up), I would recommend that you first create the repositories on your local machine using the steps below.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Create a project folder on your computer \textbf{(not in your Dropbox folder)}, and open up the Git Bash within the folder
\item
  Enter \texttt{git\ init} to initialize your folder as a Git repository
\item
  Enter \texttt{git\ remote\ add\ origin\ "dropbox:///path/to/repo"}
\end{enumerate}

If a repository already exists in a Dropbox folder, and you want to make a local copy, you can do the following:

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Create a project folder on your computer, and open up the Git Bash within the folder
\item
  Enter \texttt{git\ clone\ "dropbox:///path/to/repo"\ -b\ master}
\end{enumerate}

You are now set up to use Dropbox as your remote repository and can \texttt{commit}, \texttt{push}, and \texttt{pull} changes using the Git Bash commands:

\begin{itemize}
\tightlist
\item
  \texttt{git\ add\ .} This \emph{stages} the changes to your files, and it is essential to do before you \texttt{commit}
\item
  \texttt{git\ commit\ -m\ "your\ commit\ message"}
\item
  \texttt{git\ push\ origin\ master}
\item
  \texttt{git\ pull\ origin\ master}
\end{itemize}

\hypertarget{onedrivegoogle-drivenetwork-driveothers---the-ugly}{%
\subsection{OneDrive/Google Drive/Network Drive/others - the Ugly}\label{onedrivegoogle-drivenetwork-driveothers---the-ugly}}

*\emph{The instructions for this are based off the following articles and have not been tested}*.

\url{https://blog.geekforbrains.com/how-to-use-dropbox-and-git-for-private-repos-e1d304d5ff79}

\url{http://autchen.github.io/guides/2016/03/10/git-onedrive.html}

\url{http://tony.halcyonlane.com/blog/2011/09/22/Using-git-at-work-on-a-Windows-network-drive//}

\url{https://medium.com/@techstreams/git-google-drive-simple-git-host-3a84db4fc1fd}

If you want to use a different file syncing system, then you need to create a \emph{bare} remote repository. This is structured differently than a normal git repository, which makes it \emph{slightly} better for use as a remote repository \ldots{} but it's still a bad idea and can corrupt the project.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Create/open an existing project folder on your computer \textbf{(not in your OneDrive folder)}, and open up the Git Bash within the folder
\item
  Enter \texttt{git\ init} to initialize your folder as a Git repository
\item
  Assuming you have files already in the directory, you should commit them using
\end{enumerate}

\begin{verbatim}
git add --all
git commit -m "your commit message"
\end{verbatim}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\setcounter{enumi}{3}
\tightlist
\item
  Create the bare repo in OneDrive etc using

  \begin{itemize}
  \tightlist
  \item
    \texttt{git\ init\ -\/-bare\ .\ \textasciitilde{}/OneDrive///path/to/repo/project.git}
  \end{itemize}
\item
  Configure your remote using

  \begin{itemize}
  \tightlist
  \item
    \texttt{git\ remote\ add\ origin\ \textasciitilde{}/OneDrive///path/to/repo/project.git}
  \end{itemize}
\item
  \texttt{push}/\texttt{pull} your commits using

  \begin{itemize}
  \tightlist
  \item
    \texttt{git\ push\ origin\ master}
  \end{itemize}
\end{enumerate}

You can share the OneDrive repository (folder) so that multiple people can work on the project. However, if you do this, \textbf{it is essential you coordinate your \texttt{push}/\texttt{pull} commands to avoid corrupting the repository.}

\hypertarget{creating-a-repository}{%
\section{Creating a repository}\label{creating-a-repository}}

*\emph{This section will need to be updated after figuring out the PHO system}*

If everything has gone well until now, you're ready to create a project repository. This is where all your code, all your data, all your output files, everything, should live. Whilst you can create a repository directly on your computer, I would advise against this as it causes additional headaches when you want to connect it with GitHub. Instead, create the remote repository first on GitHub.

\begin{itemize}
\tightlist
\item
  Go to www.Github.com and click the \texttt{+} and \emph{``New repository''}.
\item
  Choose a project name
\item
  Decide whether you want it to be a public or private project (choose private if working on PHO data and research, as you can always convert it to public later)
\item
  Initialize with a README file
\end{itemize}

\hypertarget{connecting-to-github}{%
\subsection{Connecting to GitHub}\label{connecting-to-github}}

*\emph{This section will need to be updated after figuring out the PHO system}*

If you are using SourceTree, there are two ways to connect your computer to your GitHub repositories. I would recommend the first option, as it makes \emph{cloning} repositories (making a copy on your local computer) easier in the future, as you don't have to go to GitHub each time to find the \emph{HTTPS/SSH} address.

\textbf{Method 1}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Go to \emph{Tools -\textgreater{} Options -\textgreater{} Authentication} in SourceTree and add your GitHub account details
\item
  Leave the preferred protocol at \emph{``HTTPS''} for the moment, unless you know what you're doing with SSH keys
\item
  Now open a new tab, click on \emph{Remote}, and you should see your repositories listed
\item
  Clone the repositories that you'd like to work on
\end{enumerate}

\begin{quote}
\textbf{Note:} Now SourceTree and GitHub are connected, you shouldn't have to do the first few steps - just go to step 3.
\end{quote}

\textbf{Method 2}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Go to your repository on GitHub and click on the green \emph{``Clone or download''} button
\item
  Copy the \emph{HTTPS} address (your settings should say \emph{``Clone with HTTPS''} above it, otherwise click \emph{``Use HTTPS''})
\item
  Go to SourceTree, open a new tab, and click on \emph{``Clone''}
\item
  Paste the \emph{HTTPS} address into the \emph{``Source Path / URL:''} box
\item
  Click on the \emph{``Clone''} button at the bottom
\end{enumerate}

\textbf{Method 3} (\emph{not recommended})

If you would like to do it the hard way and use the Git Bash, read the instructions \href{https://happyGitwithr.com/push-pull-Github.html}{here}

\textbf{Note:} if you would like to use SSH keys, read the instructions \href{https://help.Github.com/articles/connecting-to-Github-with-ssh/}{here}

\hypertarget{basic-commands}{%
\section{Basic commands}\label{basic-commands}}

There are many commands that you could learn in Git, but these are the basics, and will be sufficient for pretty much everything you'll need to do at the moment.

\begin{itemize}
\tightlist
\item
  \texttt{commit}: this standings for \emph{committing} a change to your file in Git. Think of it as saving a document, but instead of saving the whole document as-is, Git saves just the changes since the last version. This makes it very efficient, especially when it comes to backing up your work.
  \textbf{Key points:}

  \begin{itemize}
  \tightlist
  \item
    \texttt{commit} often. By making and saving small changes, your code versions becomes more readable in case you need to go back and find out exactly what and where it went wrong.
  \item
    Always write helpful messages - keep them succinct, but make sure they describe what the change you made was.
  \end{itemize}
\item
  \texttt{pull}: this commands copies the version of the code from your remote to your local machine. Use this when you want to get the most up-to-date version of your code to work on (assuming your local version isn't the most up-to-date)
\item
  \texttt{push}: the opposite of \texttt{pull}. If your local version is the most up-to-date version, \texttt{push} your version to the remote.
\end{itemize}

\hypertarget{branching}{%
\section{Branching}\label{branching}}

Branching is a key part of the Git work-flow. It allows you to make changes to your code, without worrying about breaking previously `good' code. But what is it?

Simply put, when you create another branch you are creating a copy of your code at that point in time. This is useful because it allows you to make changes to your copy, and leave your original code intact! So there's no concern about breaking your working code while you test out some ideas.

\begin{quote}
``But isn't that why we use Git?''
\end{quote}

Kind of. But Git is only so powerful. If you have working code, you don't want to put it out of action whilst you test ideas out, especially if other people need to use your code and can't wait for you to figure out your future problems. So creating another branch allows you to get around this issue. For most projects, you can get away with just two branches, a \texttt{master} and a \texttt{develop}, which are explained below. If your project is complex, and requires multiple people to work on the code at the same time, it would be worth you looking at implementing \href{https://nvie.com/posts/a-successful-Git-branching-model/}{this model}.

The image to the right is copied from the model listed above. It is useful in illustrating the \texttt{master} and \texttt{develop} approach to branching.

\hypertarget{creating-a-branch}{%
\subsection{Creating a branch}\label{creating-a-branch}}

As with all things in Git, you can do this multiple ways. I prefer to use the SourceTree client, as I find it far more intuitive when you can see the changes, but you can use the command line or Git bash. If you want to explore the command line code, I would recommend visiting \href{https://learnGitbranching.js.org/}{this website}, which allows you to interact with the code through illustrations.

When you are in SourceTree, open the repository you would like to create a branch in. You will notice that there are two buttons called \texttt{Branch} and \texttt{Merge}. If you click on \texttt{Branch}, you will see something like this

Enter the branch name you would like to create into \texttt{New\ Branch} (I would suggest \texttt{develop}), and hit \texttt{Create\ Branch}. That's it. You now have a \texttt{master} and \texttt{develop} branch.

You might notice the tick-box \texttt{Checkout\ New\ Branch}. This means SourceTree will execute the command \texttt{git\ checkout\ develop} i.e.~you will move to the \texttt{develop} branch to continue your work. Now, any changes you make to your code will happen in the \texttt{develop} copy of the code, not in your \texttt{master} branch. Neat. If you want to move back to \texttt{master} branch at some point, you simply right click on the \texttt{master} branch on the left side of SourceTree, and select \texttt{Checkout\ master...}.

\hypertarget{merging-a-branch}{%
\subsection{Merging a branch}\label{merging-a-branch}}

You've created a \texttt{develop} branch so you can keep you \texttt{master} pristine and in working condition. But now you've made changes you're happy with, and you want to incorporate them in the main code. To do this, you need to \texttt{merge} the changes from \texttt{develop} into \texttt{master}.

To do this, first you need to \texttt{checkout} the \texttt{master} branch, so you are merging changes \emph{into} it. Then, click on the \texttt{Merge} button in SourceTree. Select the \texttt{commit} you would like to merge into the \texttt{master} branch (most likely the top one in the \texttt{develop} branch), and click \texttt{OK}. You should have a view like this.

You have now merged your first feature. Whilst the \texttt{merge} feature is particularly useful, it is not the only way of doing this. \texttt{rebase} is another option that works in a slightly different way. It is slightly beyond the scope of this document, but you should read \href{https://www.atlassian.com/git/tutorials/merging-vs-rebasing}{this document} and visit \href{https://learnGitbranching.js.org/}{this website}, as suggested previously, to get practice putting them both into practice.

\hypertarget{git-and-jupyter}{%
\section{Git and Jupyter}\label{git-and-jupyter}}

Unfortunately, Git and Jupyter don't always play nicely, so we have to do a few things to try and get around the issues. Due to the way the notebooks create and store the outputs from the code, \texttt{diffs} become unreadable. There are a few ways to get around this. The first option is the simplest, but the others provide a little more control over what you see in the \texttt{diffs}.

*\emph{\textbf{Test out the other options!}*}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Clear all outputs before you save and commit the files. That way, Git only tracks changes to the input
\item
  Download the notebook as a markdown file allowing \texttt{diffs} to be tracked in Git as normal
\item
  \href{https://nbdime.readthedocs.io/en/latest/index.html}{nbdime}
\item
  \href{https://www.reviewnb.com/}{ReviewNB}
\item
  \href{https://nextjournal.com/}{Nextjournal} is a promising take on notebooks that simplifies the process of making reproducible research. Currently it is only in beta, and for private research, but if it has a free version when it becomes established it would be a good option allowing a `Google Docs' style of version control
\end{enumerate}

\hypertarget{final-words}{%
\chapter{Final Words}\label{final-words}}

We have finished a nice book.

\bibliography{book.bib,packages.bib}


\end{document}
